<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ePhotosynthesis: API</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ePhotosynthesis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/daa/api.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">API</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This documentation is aimed at those who intend to use the <a class="el" href="../../d0/d3a/namespacee_photosynthesis.html">ePhotosynthesis</a> library as opposed to the stand alone binary. For the general use case code will only need to interact with a Driver class, giving it a few inputs and letting it handle the minutia. For those wanting to have finer control over the ODE functionality see the <a class="el" href="#apidet">Details</a> section below.</p>
<h1><a class="anchor" id="callingCode"></a>
Calling the Code from C++</h1>
<p>For the basic use case there are only two objects which must be interacted with: a Variables instance and an instance of one of the Driver classes. The Variables class is used to hold variables on the global scope, intermediate results for each ODE iteration, and if requested a copy of the Rate calculations for each step. The Driver class is used to initialize the input variables, initialize and run the ODE solver, and return the results to the user. A few of the Variables data members may need to be changed from their default value for the computation to succeed. These include (but are not limited to):</p>
<ul>
<li><b>CO2_in</b> The initial CO<sub>2</sub> concentration.</li>
<li><b>TestLi</b> The light strength?</li>
<li><b>TestATPCost</b> The ATP cost.</li>
<li><b>useC3</b> Whether to use the C3 method of calculcations or not.</li>
<li><b>RUBISCOMETHOD</b> Which Rubisco calculation method to use.</li>
<li><b>EnzymeAct</b> Map of the input enzyme levels.</li>
</ul>
<p>The different Driver classes take different sets of inputs (see the individual API documentations), but all take the following:</p>
<ul>
<li><b>start</b> The time stamp to start calculations at.</li>
<li><b>step</b> The optimal timestep to take for each iteration (decreasing this value can help the the ODE solver is having trouble converging on a solution).</li>
<li><b>endtime</b> The timestamp to stop calculations at.</li>
<li><b>maxSubSteps</b> The maximum number of substeps to take for each step (increasing this value can help when the ODE solver is having trouble converging on a solution).</li>
<li><b>atol</b> Absolute tolerance the ODE solver will use to determine convergence.</li>
<li><b>rtol</b> Relative tolerance the ODE solver will use to determine convergence.</li>
<li><b>showWarnings</b> Whether to send convergence warning messages to stdout or not.</li>
</ul>
<p>All drivers return a vector of doubles containing the results of the calculations. See the API documentation for the drivers for details of what each returns.</p>
<p>The following code snippet gives the general minimum code needed to interface with the <a class="el" href="../../d0/d3a/namespacee_photosynthesis.html">ePhotosynthesis</a> library (namespaces have been omited for clarity).</p>
<div class="fragment"><div class="line"><span class="comment">// instantiate a Variables instance</span></div>
<div class="line">Variables* theVars = <span class="keyword">new</span> Variables();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// set some basic parameters</span></div>
<div class="line">theVars-&gt;CO2_in = 800.;</div>
<div class="line">theVars-&gt;TestLi = 50.;</div>
<div class="line">theVars-&gt;TestATPCost = 1.5;</div>
<div class="line">theVars-&gt;RUBISCOMETHOD = 1;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span> start = 0.;</div>
<div class="line"><span class="keywordtype">double</span> step = 1.;</div>
<div class="line"><span class="keywordtype">double</span> end = 1000.;</div>
<div class="line"><span class="keywordtype">int</span> maxSubSteps = 1500;</div>
<div class="line"><span class="keywordtype">double</span> abstol = 1e-5;</div>
<div class="line"><span class="keywordtype">double</span> reltol = 1e-4;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// instantiate the driver</span></div>
<div class="line">trDynaPSDriver* driver = <span class="keyword">new</span> trDynaPSDriver(theVars, start, step, end, maxSubSteps, abstol, reltol, 1, 1);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// run the calculations and get the results</span></div>
<div class="line">std::vector&lt;double&gt; results = driver-&gt;run();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// clean up</span></div>
<div class="line"><span class="keyword">delete</span> driver;</div>
<div class="line"><span class="keyword">delete</span> theVars;</div>
</div><!-- fragment --><h1><a class="anchor" id="apidet"></a>
Details</h1>
<p>Apart from the arguments to the Driver classes, there are many options which affect how the ODE solver works toward a solution. These currently are not exposed to the user, in part because of their number. However, adding these options is straight forward in the <a class="el" href="../../da/d34/classe_photosynthesis_1_1drivers_1_1_c_vode_mem.html#a588eafff13d36319ce01808b0a8c1328">ePhotosynthesis::drivers::CVodeMem::cvode_mem_init()</a> function. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Documentation</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
